(()=>{"use strict";var e={5373:(e,t,s)=>{s.r(t)},9962:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const n=s(408),i=s(1914),a=s(199),r=s(1966),o=s(4114),l=s(5186),c=s(3715),u=s(5781);t.App=class{constructor(e){this.rootElement=e,this.isRegistrationOpen=!1,this.isGameOpen=!1,this.timer=new c.Timer,this.headerAvatar=new u.HeaderAvatar,this.pageMain=new r.PageMain,this.footer=new n.Footer,this.game=new i.Game(this.isGameOpen,this.timer),this.currentRoute=new l.Route,this.registration=new o.Registration("div",this.isRegistrationOpen,this.headerAvatar),this.header=new a.Header("div",this.currentRoute,this.game,this.registration,this.isRegistrationOpen,this.isGameOpen,this.timer,this.headerAvatar),this.currentRouteElement=this.currentRoute.getCurrentRoute()}render(){var e;return null===(e=this.rootElement)||void 0===e||e.append(this.header.element,this.pageMain.element,this.footer.element),this.pageMain.element.append(this.currentRouteElement,this.game.element,this.registration.element),window.onpopstate=()=>{this.pageMain.element.innerHTML="",this.currentRouteElement=this.currentRoute.getCurrentRoute(),this.pageMain.element.append(this.currentRouteElement,this.game.element,this.registration.element)},this.currentRouteElement}}},5437:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageAboutGame=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("div",["how-to-play__wrapper"]),this.element.innerHTML="\n    <h1 class='how-to-play__title'>How to play?</h1>\n    <ul class='how-to-play__list'>\n      <li class='how-to-play__item'>Register new player in game</li>\n      <li class='how-to-play__item'>Configure your game settings</li>\n      <li class='how-to-play__item'>Start you new game! Remember card positions and match it before times up.</li>\n    </ul>\n\n    <div class='how-to-play__images'>\n      <img src='assets/images/how-to-play-register.png' alt='registration field' class='how-to-play__register' />\n      <img src='assets/images/how-to-play-settings.png' alt='settings field' class='how-to-play__settings' />\n      <img src='assets/images/how-to-play-game.png' alt='game field' class='how-to-play__game' />\n    </div>\n      "}}t.PageAboutGame=i},2877:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageBestScore=void 0;const n=s(7563),i=s(6658),a=s(6466),r=s(2178),o=s(6771);class l extends r.BaseComponent{constructor(){super("div",["best-score__wrapper"]),this.title=new a.BestScoreTitle,this.list=new i.BestScoreList,this.getcontent()}getcontent(){o.db.init("mambarinka").then((()=>{o.db.readAll("Users").then((()=>{o.db.readFiltered("Users").then((e=>{this.num=e.length;for(let t=0;t<e.length&&10!==t;t++){const s=new n.BestScoreItem(e[t].avatar,e[t].firstName,e[t].lastName,e[t].email,e[t].bestScore);this.list.element.append(s.element),this.element.append(this.title.element,this.list.element)}}))}))}))}}t.PageBestScore=l},829:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageSettings=void 0;const n=s(3863),i=s(5201),a=s(8128),r=s(6160),o=s(2178),l=s(6771);class c extends o.BaseComponent{constructor(){super("div",["settings__wrapper"]),this.cardsTypes=["","animals","cars"],this.gameTypes=["","4x4","6x6","8x8"],this.titleSettingsCards=new r.SettingsTitle,this.titleSettingsCards.element.textContent="Game cards",this.labelSettingsCards=new n.SettingsLabel,this.labelSettingsCards.label.textContent="select game cards type",this.selectSettingsCards=new a.SettingsSelect("cards"),this.titleSettingsGame=new r.SettingsTitle,this.titleSettingsGame.element.textContent="Difficulty",this.labelSettingsGame=new n.SettingsLabel,this.labelSettingsGame.label.textContent="select game type",this.selectSettingsGame=new a.SettingsSelect("game");for(let e=0;e<this.cardsTypes.length;e++){const t=new i.SettingsOption(this.cardsTypes[e]);this.selectSettingsCards.select.append(t.option)}for(let e=0;e<this.gameTypes.length;e++){const t=new i.SettingsOption(this.gameTypes[e]);this.selectSettingsGame.select.append(t.option)}this.element.append(this.titleSettingsCards.element,this.labelSettingsCards.label,this.selectSettingsCards.select,this.titleSettingsGame.element,this.labelSettingsGame.label,this.selectSettingsGame.select),this.selectSettingsCards.select.addEventListener("change",(()=>this.selectHandler())),this.selectSettingsGame.select.addEventListener("change",(()=>this.selectHandler()))}selectHandler(){l.db.write(this.getSettingsObject(),"Settings")}getSettingsObject(){const e={gameCardsType:"",gameDifficultyType:""};return e.gameCardsType=this.selectSettingsCards.select.value,e.gameDifficultyType=this.selectSettingsGame.select.value,e}}t.PageSettings=c},7161:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=void 0,t.uuid=()=>Math.round(100*Math.random())+50-2},6771:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.db=t.IndexedDB=void 0;const n=s(7161);let i;class a{constructor(){this.db=null,this.numberUsers=0,this.defaultUsers=[{firstName:"Nicci",lastName:"Troiani",email:"nicci@gmail.com",avatar:"./assets/images/best-score-avatar1.png",bestScore:11,id:n.uuid()},{firstName:"George",lastName:"Fields",email:"jack@gmail.com",avatar:"./assets/images/best-score-avatar2.png",bestScore:22,id:n.uuid()},{firstName:"Jones",lastName:"Dermot",email:"dermot@gamil.com",avatar:"./assets/images/best-score-avatar3.png",bestScore:33,id:n.uuid()},{firstName:"Jane",lastName:"Doe",email:"jane.doe@gmail.com",avatar:"./assets/images/best-score-avatar4.png",bestScore:44,id:n.uuid()}],this.defaultSettings={gameCardsType:"animals",gameDifficultyType:"4x4"}}init(e){return new Promise(((t,s)=>{const n=window.indexedDB.open(e);n.onupgradeneeded=()=>{this.db=n.result;const e=this.db.createObjectStore("Users",{keyPath:"id"});e.createIndex("name-email",["firstName","lastName","email"],{unique:!0}),e.createIndex("avatar","avatar",{unique:!1}),e.createIndex("best-score","bestScore",{unique:!1}),this.defaultUsers.forEach((t=>{e.put(t)}));const t=this.db.createObjectStore("Settings",{keyPath:"id",autoIncrement:!0});t.createIndex("game-cards-type","gameCardsType"),t.createIndex("game-difficulty-type","gameDifficultyType"),t.put(this.defaultSettings)},n.onsuccess=()=>{this.db=n.result,t(this.db)},n.onerror=()=>{console.log(`error opening database ${n.error}`)}}))}write(e,t){if(null!==this.db){const s=this.db.transaction(t,"readwrite"),n=s.objectStore(t).put(e);s.oncomplete=()=>{this.numberUsers=n.result,console.log("complete",n.result)},s.onerror=()=>{console.log("error",n.error)},s.onabort=()=>{console.log("abort")}}}readAll(e){return new Promise(((t,s)=>{if(null!==this.db){const n=this.db.transaction(e,"readwrite"),a=n.objectStore(e),r=a.getAll();i=a.count(),n.oncomplete=()=>{t(r.result)},n.onerror=()=>{s(r.error)}}}))}readFiltered(e){return new Promise(((t,s)=>{if(null!==this.db){const s=this.db.transaction(e,"readonly"),n=s.objectStore(e).index("best-score").openCursor(null,"prev"),i=[];n.onsuccess=()=>{const e=n.result;e&&(i.push(e.value),null==e||e.continue())},s.oncomplete=()=>{t(i)}}}))}getCurrentUser(e){return new Promise((t=>{if(null!==this.db){const s=this.db.transaction(e,"readwrite"),n=s.objectStore(e),i=(n.getAll(),n.get(this.numberUsers));s.oncomplete=()=>{t(i.result)}}}))}writeCurrentUser(e,t){if(null!==this.db){const s=this.db.transaction(e,"readwrite"),n=s.objectStore(e).put(t);s.oncomplete=()=>{this.numberUsers=n.result},s.onerror=()=>{console.log("error",n.error)}}}}t.IndexedDB=a,t.db=new a},7563:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScoreItem=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(e,t,s,n,i){super("li",["best-score__item"]),this.avatar=e,this.firstName=t,this.lastName=s,this.email=n,this.bestScore=i,this.element.innerHTML=`<img src="${this.avatar}" alt="avatar user" class="best-score__item-avatar">\n         <div class="best-score__data-user">\n            <span class="best-score__name-user">${this.firstName} ${this.lastName}</span>\n            <span class="best-score__email-user">${this.email}</span>\n          </div>\n          <output class="best-score__result" name="Score: ">${this.bestScore}</output>`}}t.BestScoreItem=i},6658:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScoreList=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("ul",["best-score__list"])}}t.BestScoreList=i},6466:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScoreTitle=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("h1",["best-score__title"]),this.element.textContent="\n    Best players\n      "}}t.BestScoreTitle=i},2389:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonCancel=void 0;const n=s(6147);class i extends n.BaseComponentButton{constructor(){super(["form__btn-cancel","button"]),this.button.textContent="\n    cancel\n      ",this.button.type="button"}}t.ButtonCancel=i},6652:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonCongratulation=void 0;const n=s(6147);class i extends n.BaseComponentButton{constructor(){super(["congratulation__button","button"]),this.button.textContent="\n    ОК\n      ",this.button.type="button"}}t.ButtonCongratulation=i},8679:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buttonMain=t.ButtonMain=void 0;const n=s(6147);class i extends n.BaseComponentButton{constructor(){super(["main-nav__toggle","button"]),this.button.textContent="\n    register new player\n      ",this.button.type="button"}}t.ButtonMain=i,t.buttonMain=new i},2052:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonSubmit=void 0;const n=s(6147);class i extends n.BaseComponentButton{constructor(){super(["form__btn-submit","button"]),this.button.textContent="\n    Add user\n      ",this.button.type="submit"}}t.ButtonSubmit=i},5819:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const n=s(2178),i="flipped";class a extends n.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.onClick=()=>{},this.element.innerHTML=`\n    <div class="card">\n    <div class="card__front" style="background-image: url('./images/${e}')"></div>\n    <div class="card__back"></div>\n    </div>\n    `,this.element.onclick=()=>{this.onClick()}}flipToBack(){this.isFlipped=!0,this.element.classList.add(i)}flipToFront(){this.isFlipped=!1,this.element.classList.remove(i)}}t.Card=a},8582:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[],this.onCardClick=null}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>{this.element.append(e.element),e.onClick=()=>{this.onCardClick&&this.onCardClick(e)}})),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),3e4)}}t.CardsField=i},4143:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Congratulation=void 0;const n=s(2178),i=s(6652),a=s(5186);class r extends n.BaseComponent{constructor(e="div",t,s){super("div",["congratulation__text"]),this.buttonHandler=(e,t)=>{var s;null===(s=document.querySelector(".best-score__wrapper"))||void 0===s||s.classList.remove("hide"),e.classList.add("hide"),t.classList.add("hide")},this.wrapper=document.createElement(e),this.wrapper.classList.add("congratulation"),this.element.textContent=`Congratulations! You successfully found all matches on ${t} minutes.`,this.button=new i.ButtonCongratulation,this.wrapper.append(this.element,this.button.button),this.currentRoute=new a.Route,this.button.button.addEventListener("click",(()=>this.buttonHandler(this.wrapper,s)))}}t.Congratulation=r},408:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("footer",["footer"]),this.element.innerHTML="\n    <div class='footer__wrapper'>\n    <a class='footer__link footer__link--github' href='https://github.com/mambarinka' target='_blank'\n      rel='noopener noreferrer'>mambarinka</a>\n    <a class='footer__link footer__link--rsschool' href='https://rs.school/js/' target='_blank'\n      rel='noopener noreferrer'>\n      <span class='footer__link-year'>'21</span>\n    </a>\n  </div>\n    "}}t.Footer=i},6962:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormAvatar=void 0;const n=s(3833);class i extends n.BaseComponentImage{constructor(){super(["form__user-img"]),this.image.src="./assets/images/user-img.svg",this.image.alt="avatar of user"}}t.FormAvatar=i},441:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormInput=void 0;const n=s(3864);class i extends n.BaseComponentInput{constructor(e="",t="",s="",n,i,a){super(["form__item-input"]),this.isValidate=!0,this.inputFileHandler=(e,t,s)=>{const n=["gif","jpg","jpeg","png"];if(null!==e.files){const i=e.files[0],a=i.name.toLowerCase();if(n.some((e=>a.endsWith(e)))){const e=new FileReader;e.addEventListener("load",(()=>{null!==e.result&&(t.image.src=e.result,s.image.src=e.result)})),e.readAsDataURL(i)}}},this.input.id=e,this.input.type=t,this.input.name=e,this.input.placeholder=s,this.input.required=!0,this.formItem=n,this.imageAvatar=i,this.headerAvatar=a,"first-name"===this.input.name||"last-name"===this.input.name?(this.input.maxLength=30,this.input.addEventListener("change",(()=>this.inputNameHandler(this.formItem)))):"e-mail"===this.input.name?(this.input.maxLength=30,this.input.addEventListener("change",(()=>this.inputEmailHandler(this.formItem)))):"file"===this.input.name&&this.input.addEventListener("change",(()=>this.inputFileHandler(this.input,this.imageAvatar,this.headerAvatar)))}inputNameHandler(e){return!/^[^~!@#$%*()_—+=|:;"'`<>,.?/^]+$/gi.test(this.input.value)||/^\d+$/.test(this.input.value)?(e.element.classList.remove("validity"),e.element.classList.add("not-validity"),this.input.setCustomValidity('First name and last name cant contain these characters: ~ ! @ # $ % * +() _ — + = | : ; " `< > , . ? / ^'),this.isValidate=!1):(e.element.classList.remove("not-validity"),e.element.classList.add("validity"),this.input.setCustomValidity(""),this.isValidate=!0),this.input.reportValidity(),this.isValidate}inputEmailHandler(e){return/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.input.value)?(e.element.classList.remove("not-validity"),e.element.classList.add("validity"),this.input.setCustomValidity(""),this.isValidate=!0):(e.element.classList.remove("validity"),e.element.classList.add("not-validity"),this.input.setCustomValidity("Email must comply with the standard email generation rule RFC"),this.isValidate=!1),this.input.reportValidity(),this.isValidate}clearAvatarPreview(){this.imageAvatar&&(this.imageAvatar.image.src="./assets/images/user-img.svg")}}t.FormInput=i},4789:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormLabel=void 0;const n=s(6164);class i extends n.BaseComponentLabel{constructor(e="",t=""){super(["form__item-label"]),this.label.htmlFor=e,this.label.textContent=t}}t.FormLabel=i},7130:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormRegistrationItem=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("li",["form__item"])}}t.FormRegistrationItem=i},1257:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormRegistrationList=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("ul",["form__list"])}}t.FormRegistrationList=i},3339:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FormRegistration=void 0;const i=s(2877),a=s(7161),r=s(6771),o=s(2178),l=s(6235),c=s(2389),u=s(8679),m=s(2052),d=s(6962),h=s(441),p=s(4789),g=s(7130),v=s(1257);class b extends l.BaseComponentForm{constructor(e="h2",t){super(["form"]),this.arrayInputs=[],this.checkValidInput=e=>e.includes(!0),this.title=document.createElement(e),this.title.classList.add("form__title"),this.title.textContent="\n    Registr new Player\n      ",this.form.method="post",this.form.enctype="multipart/form-data",this.form.autocomplete="off",this.formList=new v.FormRegistrationList,this.formAvatar=new d.FormAvatar,this.names=["first-name","last-name","e-mail"],this.textContents=["First Name","Last Name"," E-mail"],this.types=["text","text","text"],this.placeHolders=["Jessie","Doe","Jessie.Doe@gmail.com"];for(let e=0;e<3;e++){const s=new g.FormRegistrationItem,n=new p.FormLabel(this.names[e],this.textContents[e]),i=new h.FormInput(this.names[e],this.types[e],this.placeHolders[e],s,this.formAvatar,t);this.arrayInputs.push(i),s.element.append(n.label,i.input),this.formList.element.append(s.element),s.element.classList.remove("not-validity")}this.wrapperAvatar=new o.BaseComponent("div",["form__user-img-wrapper"]),this.inputFile=new h.FormInput("file","file","",new g.FormRegistrationItem,this.formAvatar,t),this.arrayInputs.push(this.inputFile),this.inputFile.input.classList.add("form__item-input--file"),this.inputFile.input.required=!1,this.inputFile.input.accept="image/png, image/jpeg",this.wrapperAvatar.element.append(this.inputFile.input,this.formAvatar.image),this.buttonSubmit=new m.ButtonSubmit,this.buttonCancel=new c.ButtonCancel,this.form.append(this.title,this.formList.element,this.wrapperAvatar.element,this.buttonSubmit.button,this.buttonCancel.button),this.form.addEventListener("submit",(e=>this.formSubmitHandler(e))),this.buttonCancel.button.addEventListener("click",(()=>n(this,void 0,void 0,(function*(){return this.formCancelHandler()})))),this.pageBestScore=new i.PageBestScore}formSubmitHandler(e){u.buttonMain.button.textContent="Start Game";const t=document.querySelector(".registration");null!==t&&t.classList.add("hide"),e.preventDefault(),r.db.write(this.getUserObject(),"Users"),r.db.writeCurrentUser("Users",this.getUserObject()),this.pageBestScore&&this.pageBestScore.getcontent()}getUserObject(){const e={firstName:"",lastName:"",email:"",avatar:"",bestScore:0,id:a.uuid()};return this.arrayInputs.forEach((t=>{"first-name"===t.input.name?e.firstName=t.input.value:"last-name"===t.input.name?e.lastName=t.input.value:"e-mail"===t.input.name?e.email=t.input.value:"file"===t.input.name&&(e.avatar=this.formAvatar.image.src)})),e}formCancelHandler(){this.form.reset()}}t.FormRegistration=b},1914:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=s(4680),a=s(2178),r=s(5819),o=s(8582),l=s(4143),c=s(6771),u=s(2877);class m extends a.BaseComponent{constructor(e,t){super("div",["cards-field__wrapper","hide"]),this.isAnimation=!1,this.successfulTry=0,this.errorTry=0,this.cardsField=new o.CardsField,this.timer=t,this.element.append(this.timer.element,this.cardsField.element),this.isGameOpen=e,this.element.classList.contains("hide")?this.isGameOpen=!1:this.isGameOpen=!0,this.timer=t,this.pageBestScore=new u.PageBestScore}newGame(e,t){this.cardsField.clear();const s=e.slice(0,t),n=s.concat(s).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));return this.cardsField.onCardClick=e=>this.cardHandler(e),this.timer.startTimer(),this.cardsField.addCards(n)}cardHandler(e){return n(this,void 0,void 0,(function*(){if(this.isAnimation)return;if(!e.isFlipped)return;if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image?(this.activeCard.element.classList.add("error"),e.element.classList.add("error"),yield i.delay(1e3),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()]),this.errorTry++):(this.activeCard.element.classList.add("ok"),e.element.classList.add("ok"),this.successfulTry++),this.cardsLength=Array.from(document.querySelectorAll(".card-container")).length;const t=Array.from(document.querySelectorAll(".ok")).length;this.cardsLength===t&&(this.getScore(),this.timer.stopTimer(),this.congratulation=new l.Congratulation("div",this.timer.element.textContent,this.element),this.element.append(this.congratulation.wrapper),c.db.init("mambarinka").then((()=>{c.db.getCurrentUser("Users").then((e=>{console.log("количество очков",this.getScore()),e.bestScore=this.getScore(),c.db.writeCurrentUser("Users",e),this.pageBestScore&&this.pageBestScore.getcontent()}))}))),this.activeCard.element.classList.remove("error"),e.element.classList.remove("error"),this.activeCard=void 0,this.isAnimation=!1}))}getScore(){let e=1;16===this.cardsLength?e=4:36===this.cardsLength?e=6:64===this.cardsLength&&(e=8);const t=this.timer.getTime(),s=(100*(this.successfulTry-this.errorTry)-10*t)*e;return s<0?0:s}}t.Game=m},5781:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderAvatar=void 0;const n=s(3833);class i extends n.BaseComponentImage{constructor(){super(["page-header__avatar"]),this.image.src="./assets/images/user-img.svg",this.image.alt="avatar of user"}}t.HeaderAvatar=i},199:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=s(6771),a=s(2178),r=s(8679),o=s(5522),l=s(8925);class c extends a.BaseComponent{constructor(e="div",t,s,n,i,a,c,u){super("header",["page-header"]),this.wrapper=document.createElement(e),this.wrapper.classList.add("page-header__wrapper"),this.logo=new o.Logo,this.navigation=new l.Navigation,this.headerAvatar=u,this.element.append(this.wrapper),this.wrapper.append(this.logo.element,this.navigation.element,r.buttonMain.button,this.headerAvatar.image),this.game=s,this.isGameOpen=a,this.registration=n,this.isRegistrationOpen=i,this.timer=c,this.currentRouteElement=t.getCurrentRoute(),r.buttonMain.button.addEventListener("click",(()=>{this.buttonHandler(r.buttonMain),this.currentRouteElement=t.getCurrentRoute()}))}buttonHandler(e){const t=e.button.innerText.toLowerCase();"register new player"===t?(this.registration.element.classList.toggle("hide"),this.isRegistrationOpen=!0):"start game"===t?(this.currentRouteElement.classList.toggle("hide"),this.game.element.classList.toggle("hide"),this.timer.isGameOpen=!0,this.startGame(),document.querySelectorAll(".main-nav__link").forEach((e=>{e.addEventListener("click",(()=>{this.stopGame(),this.game.element.classList.toggle("hide"),this.currentRouteElement.classList.toggle("hide")}))}))):"stop game"===t&&(this.stopGame(),this.game.element.classList.toggle("hide"),this.currentRouteElement.classList.toggle("hide"))}startGame(){return n(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=yield e.json();i.db.init("mambarinka").then((()=>{i.db.readAll("Settings").then((e=>{let s;const n=e[e.length-1].gameCardsType;let i;"animals"===n?[s,i]=t:"cars"===n?[i,s]=t:[s,i]=t;const a=s.images.map((e=>`${s.category}/${e}`));let o;const l=e[e.length-1].gameDifficultyType;o="4x4"===l?8:"6x6"===l?18:"8x8"===l?32:8,r.buttonMain.button.textContent="stop game",this.game.newGame(a,o);const c=Array.from(document.querySelectorAll(".card-container"));Array.from(c).forEach((e=>{let t;t="4x4"===l?5:"6x6"===l?7:"8x8"===l?10:5,e.setAttribute("style",`width: calc(100% / ${t}); height: calc(100% / ${t})`)}))}))}))}))}stopGame(){this.timer.stopTimer(),r.buttonMain.button.textContent="start game"}}t.Header=c},5522:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("a",["logo"]),this.element.innerHTML="\n      <img\n        class='logo__image'\n        src='assets/images/logo.svg'\n        width='80'\n        height='39'\n        alt='Logo of Match-Match-Game'\n      />\n      "}}t.Logo=i},3603:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavItem=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("li",["main-nav__item"])}}t.NavItem=i},4466:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavLink=void 0;const n=s(4079);class i extends n.BaseComponentLink{constructor(e="",t=""){super(["main-nav__link",`main-nav__link--${e}`]),this.link.textContent=t,this.link.href=`#/${e}`}}t.NavLink=i},8925:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0;const n=s(2178),i=s(3603),a=s(4466);class r extends n.BaseComponent{constructor(e="ul"){super("nav",["main-nav"]),this.currentRouteName="",this.currentNavItem=document.body,this.list=document.createElement(e),this.list.classList.add("main-nav__list"),this.element.append(this.list),this.menuItem=["about","score","settings"],this.menuTextContent=["About Game","Best Score","Game Settings"],this.currentRouteName=window.location.hash.slice(2);for(let e=0;e<3;e++){const t=new i.NavItem,s=new a.NavLink(this.menuItem[e],this.menuTextContent[e]);t.element.append(s.link),this.list.append(t.element),s.link.className===`main-nav__link main-nav__link--${this.currentRouteName}`&&s.link.classList.add("main-nav__link--current")}}}t.Navigation=r},1966:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageMain=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("main",["page-main"])}}t.PageMain=i},4114:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Registration=void 0;const n=s(2178),i=s(3339);class a extends n.BaseComponent{constructor(e="div",t,s){super("div",["registration","hide"]),this.overlayHandler=e=>{e.classList.add("hide")},this.overlay=document.createElement(e),this.overlay.classList.add("registration__overlay"),this.headerAvatar=s,this.formRegistration=new i.FormRegistration("h2",this.headerAvatar),this.element.append(this.overlay,this.formRegistration.form),this.overlay.addEventListener("click",(()=>this.overlayHandler(this.element))),this.isRegistrationOpen=t,this.element.classList.contains("hide")?this.isRegistrationOpen=!1:this.isRegistrationOpen=!0}}t.Registration=a},5186:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Route=void 0;const n=s(5437),i=s(2877),a=s(829),r=s(3603);t.Route=class{constructor(){this.currentRouteName="",this.currentRoute={name:"default",component:new n.PageAboutGame},this.routing=[{name:"about",component:new n.PageAboutGame},{name:"score",component:new i.PageBestScore},{name:"settings",component:new a.PageSettings}],this.defaultRoute={name:"about",component:new n.PageAboutGame},this.currentNavItem=document.body,this.currentRouteElement=this.defaultRoute.component.element,this.navItem=new r.NavItem}getCurrentRoute(){var e;return document.querySelectorAll(".main-nav__link").forEach((e=>{e.classList.remove("main-nav__link--current")})),this.currentRouteName=window.location.hash.slice(2),this.currentNavItem=document.querySelector(`.main-nav__link--${this.currentRouteName}`),null===(e=this.currentNavItem)||void 0===e||e.classList.add("main-nav__link--current"),this.currentRoute=this.routing.find((e=>e.name===this.currentRouteName)),void 0!==this.currentRoute?this.currentRouteElement=this.currentRoute.component.element:(this.currentRouteElement=this.defaultRoute.component.element,window.location.hash="#/about"),this.currentRouteElement}}},3863:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsLabel=void 0;const n=s(6164);class i extends n.BaseComponentLabel{constructor(e="",t=""){super(["form__item-label"]),this.label.htmlFor=e,this.label.textContent=t}}t.SettingsLabel=i},5201:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsOption=void 0;const n=s(9437);class i extends n.BaseComponentOption{constructor(e){super(["settings__option"]),this.option.value=e,this.option.textContent=e}}t.SettingsOption=i},8128:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsSelect=void 0;const n=s(6687);class i extends n.BaseComponentSelect{constructor(e=""){super(["settings__select"]),this.select.id=e,this.select.name=e}}t.SettingsSelect=i},6160:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsTitle=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("h2",["settings__title"])}}t.SettingsTitle=i},3715:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const n=s(2178);class i extends n.BaseComponent{constructor(){super("div",["timer"]),this.timer=setInterval((()=>{}),1e3),this.isGameOpen=!1,this.min=0,this.sec=0,this.getZero=e=>e>=0&&e<10?`0${e}`:e}startTimer(){if(this.isGameOpen){let e=3600;this.timer=setInterval((()=>{this.min=Math.trunc(e/60%60),this.sec=e%60,this.element.textContent=`${this.getZero(this.min)} : ${this.getZero(this.sec)}`,e++}),1e3)}}stopTimer(){clearInterval(this.timer)}getTime(){return 60*this.min+this.sec}}t.Timer=i},6147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentButton=void 0,t.BaseComponentButton=class{constructor(e=[]){this.button=document.createElement("button"),this.button.classList.add(...e)}}},6235:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentForm=void 0,t.BaseComponentForm=class{constructor(e=[]){this.form=document.createElement("form"),this.form.classList.add(...e)}}},3833:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentImage=void 0,t.BaseComponentImage=class{constructor(e=[]){this.image=document.createElement("img"),this.image.classList.add(...e)}}},3864:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentInput=void 0,t.BaseComponentInput=class{constructor(e=[]){this.input=document.createElement("input"),this.input.classList.add(...e)}}},6164:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentLabel=void 0,t.BaseComponentLabel=class{constructor(e=[]){this.label=document.createElement("label"),this.label.classList.add(...e)}}},4079:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentLink=void 0,t.BaseComponentLink=class{constructor(e=[]){this.link=document.createElement("a"),this.link.classList.add(...e)}}},9437:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentOption=void 0,t.BaseComponentOption=class{constructor(e=[]){this.option=document.createElement("option"),this.option.classList.add(...e)}}},6687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponentSelect=void 0,t.BaseComponentSelect=class{constructor(e=[]){this.select=document.createElement("select"),this.select.classList.add(...e)}}},2178:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},4680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}},591:(e,t,s)=>{e.exports=s.p+"assets/images/best-score-avatar1.png"},1327:(e,t,s)=>{e.exports=s.p+"assets/images/best-score-avatar2.png"},5269:(e,t,s)=>{e.exports=s.p+"assets/images/best-score-avatar3.png"},4778:(e,t,s)=>{e.exports=s.p+"assets/images/best-score-avatar4.png"},3040:(e,t,s)=>{e.exports=s.p+"assets/images/how-to-play-game.png"},6503:(e,t,s)=>{e.exports=s.p+"assets/images/how-to-play-register.png"},6938:(e,t,s)=>{e.exports=s.p+"assets/images/how-to-play-settings.png"},7573:(e,t,s)=>{e.exports=s.p+"assets/images/logo.svg"},5050:(e,t,s)=>{e.exports=s.p+"assets/images/user-img.svg"}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{s(5373),s(5050),s(3040),s(6503),s(6938),s(7573),s(591),s(1327),s(5269),s(4778);const e=s(9962),t=s(6771);window.onload=()=>{new e.App(document.body).render(),t.db.init("mambarinka")}})()})();